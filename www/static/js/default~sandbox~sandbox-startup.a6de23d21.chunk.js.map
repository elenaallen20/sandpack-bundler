{"version":3,"sources":["webpack:///./src/sandbox/eval/transpilers/babel/worker/index.ts","webpack:///../codesandbox-api/dist/codesandbox.es5.js","webpack:///../common/lib/templates/helpers/is-server.js","webpack:///../common/lib/utils/url-generator.js","webpack:///../common/lib/utils/url-generator/dashboard.js","webpack:///../sandbox-hooks/preview-secret.js"],"names":["module","exports","Worker","transformers","transformError","error","modules","map","c","filter","x","clearErrorTransformers","length","registerErrorTransformer","check","push","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","generateId","Math","floor","random","Protocol","type","handleMessage","target","_this","outgoingMessages","Set","_messageListener","data","returnMessage","_a","$type","getTypeId","has","$id","$data","$originId","internalId","source","postMessage","_postMessage","createConnection","isWorker","constructor","name","getConstructorName","prototype","concat","self","addEventListener","dispose","removeEventListener","sendMessage","messageId","message","add","listenFunction","m","DedicatedWorkerGlobalScope","notifications","Object","freeze","show","title","notificationType","timeAlive","action","editor","openModule","id","lineNumber","column","path","dependencies","dependencyName","dependency","rename","actions","line","lineEnd","columnEnd","payload","severity","clear","correction","_b","_c","_d","glyph","className","host$1","process","__assign","assign","s","i","arguments","p","hasOwnProperty","bundlers","Map","resolveIframeHandshake","isStandalone","window","location","href","indexOf","opener","parent","iframeHandshakeDone","iframeHandshake","parentOrigin","parentId","parentOriginListener","origin","resetState","dispatch","newMessage","codesandbox","notifyListeners","rawMessage","JSON","parse","stringify","forEach","frame","notifyFrames","listeners","listenerId","listen","callback","keys","eventListener","registerFrame","bundlerId","set","document","reattach","defineProperty","isServer","SERVER_TEMPLATE_NAMES","template","__createBinding","create","o","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","__setModuleDefault","__importStar","mod","v2DefaultBranchUrl","v2BranchUrl","dashboard","githubAppInstallLink","teamInviteLink","blogUrl","packageExamplesUrl","docsUrl","getSandboxId","privacyUrl","tosUrl","curatorUrl","csbSite","searchUrl","gitHubToProjectsUrl","gitHubToSandboxUrl","optionsToParameterizedUrl","githubRepoUrl","profileLikesUrl","profileSandboxesUrl","teamSettingsUrl","teamOverviewUrl","exploreUrl","dashboardUrl","profileUrl","signInVercelUrl","signInUrl","signInPageUrl","forkSandboxUrl","frameUrl","embedUrl","sandboxUrl","v2EditorUrl","editorUrl","uploadFromCliUrl","newCxJSSandboxUrl","newAngularSandboxUrl","newSvelteSandboxUrl","importFromGitHubUrl","newVueSandboxUrl","newPreactSandboxUrl","newDojoSandboxUrl","newReactTypeScriptSandboxUrl","parcelSandboxUrl","newSandboxUrl","newSandboxWizard","protocolAndHost","host","CSBProjectGitHubRepository","gitHubRepoPattern","is_server_1","gitHubPrefix","dotGit","sandboxHost","STATIC_SITE_PROTOCOL","STATIC_SITE_DOMAIN","owner","repo","welcome","buildEncodedUri","strings","values","encodeURIComponent","join","split","protocol","sandboxGitUrl","git","username","branch","sandboxDetails","baseUrl","isV2","queryParams","query","URLSearchParams","toString","alias","sandbox","append","useFallbackDomain","port","usesStaticPreviewURL","_env_","USE_STATIC_PREVIEW","previewDomain","PREVIEW_DOMAIN","substr","templateIsServer","sHost","redirectTo","url","extraScopes","teamId","page","options","keyValues","sort","a","key","githubUrl","replace","csbHost","Boolean","tryHost","hostRegex","sandboxRegex","RegExp","matches","match","Error","packageName","inviteToken","v2EditorBranchUrl","repoName","branchName","workspaceId","createDraftBranch","importFlag","queryString","import","utm_source","params","appendTeamIdQueryParam","proUrl","discoverSearch","discover","search","permissionSettings","registrySettings","settings","liked","shared","deleted","recent","templates","syncedSandboxes","repository","repositories","myContributions","drafts","sandboxes","ALL_SANDBOXES_URL_PREFIX","DASHBOARD_URL_PREFIX","sanitizePath","extraParams","recentUrl","includes","albumId","searchQuery","getPreviewSecret","cookie","_exports","setPreviewSecret","secret","cookieValue","setTimeout","reload","getPopupDimensions","_getPopupSize","width","height","_getPopupOffset","_ref","wLeft","screenLeft","screenX","wTop","screenTop","screenY","left","innerWidth","top","innerHeight","getPopupOffset","listenForPreviewSecret","listener","previewSecret","requestPreviewSecretFromApp","sandboxId","endsWith","popup","open","setInterval","close"],"mappings":"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","file":"static/js/default~sandbox~sandbox-startup.a6de23d21.chunk.js","sourcesContent":["module.exports = function() {\n  return new Worker(\"/\" + \"babel-transpiler.647dbc35.worker.js\");\n};","var transformers = [];\nfunction transformError(error, module, modules) {\n    var transformedErrors = transformers.map(function (c) { return c(error, module, modules); }).filter(function (x) { return x != null; });\n    return transformedErrors[0];\n}\nfunction clearErrorTransformers() {\n    transformers.length = 0;\n}\nfunction registerErrorTransformer(check) {\n    transformers.push(check);\n}\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar generateId = function () {\n    // Such a random ID\n    return Math.floor(Math.random() * 1000000 + Math.random() * 1000000);\n};\nvar getConstructorName = function (x) {\n    try {\n        return x.constructor.name;\n    }\n    catch (e) {\n        return '';\n    }\n};\nvar Protocol = /** @class */ (function () {\n    function Protocol(type, handleMessage, target) {\n        var _this = this;\n        this.type = type;\n        this.handleMessage = handleMessage;\n        this.target = target;\n        this.outgoingMessages = new Set();\n        this._messageListener = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            var data, result, returnMessage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        data = e.data;\n                        if (data.$type !== this.getTypeId()) {\n                            return [2 /*return*/];\n                        }\n                        // We are getting a response to the message\n                        if (this.outgoingMessages.has(data.$id)) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.handleMessage(data.$data)];\n                    case 1:\n                        result = _a.sent();\n                        returnMessage = {\n                            $originId: this.internalId,\n                            $type: this.getTypeId(),\n                            $data: result,\n                            $id: data.$id,\n                        };\n                        if (e.source) {\n                            // @ts-ignore\n                            e.source.postMessage(returnMessage, '*');\n                        }\n                        else {\n                            this._postMessage(returnMessage);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        this.createConnection();\n        this.internalId = generateId();\n        this.isWorker = getConstructorName(target) === 'Worker';\n    }\n    Protocol.prototype.getTypeId = function () {\n        return \"p-\".concat(this.type);\n    };\n    Protocol.prototype.createConnection = function () {\n        self.addEventListener('message', this._messageListener);\n    };\n    Protocol.prototype.dispose = function () {\n        self.removeEventListener('message', this._messageListener);\n    };\n    Protocol.prototype.sendMessage = function (data) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var messageId = generateId();\n            var message = {\n                $originId: _this.internalId,\n                $type: _this.getTypeId(),\n                $data: data,\n                $id: messageId,\n            };\n            _this.outgoingMessages.add(messageId);\n            var listenFunction = function (e) {\n                var data = e.data;\n                if (data.$type === _this.getTypeId() &&\n                    data.$id === messageId &&\n                    data.$originId !== _this.internalId) {\n                    resolve(data.$data);\n                    self.removeEventListener('message', listenFunction);\n                }\n            };\n            self.addEventListener('message', listenFunction);\n            _this._postMessage(message);\n        });\n    };\n    Protocol.prototype._postMessage = function (m) {\n        if (this.isWorker ||\n            // @ts-ignore Unknown to TS\n            (typeof DedicatedWorkerGlobalScope !== 'undefined' &&\n                // @ts-ignore Unknown to TS\n                this.target instanceof DedicatedWorkerGlobalScope)) {\n            // @ts-ignore\n            this.target.postMessage(m);\n        }\n        else {\n            this.target.postMessage(m, '*');\n        }\n    };\n    return Protocol;\n}());\n\n/**\n * Returns an action that describes to open a notification in the editor\n *\n * @export\n * @param {string} title\n * @param {('notice' | 'warning' | 'error' | 'success')} [notificationType='notice']\n * @param {number} [timeAlive=2] How long the notification should show in seconds\n * @returns {NotificationAction}\n */\nfunction show(title, notificationType, timeAlive) {\n    if (notificationType === void 0) { notificationType = 'notice'; }\n    if (timeAlive === void 0) { timeAlive = 2; }\n    // TODO automatically add type: 'action', maybe do this after conversion to TS\n    return {\n        type: 'action',\n        action: 'notification',\n        title: title,\n        notificationType: notificationType,\n        timeAlive: timeAlive,\n    };\n}\n\n\nvar notifications = Object.freeze({\n\tshow: show\n});\n\nfunction openModule(id, lineNumber, column) {\n    // TODO automatically add type: 'action', maybe do this after conversion to TS\n    return {\n        type: 'action',\n        action: 'editor.open-module',\n        path: id,\n        lineNumber: lineNumber,\n        column: column,\n    };\n}\n\n\nvar editor = Object.freeze({\n\topenModule: openModule\n});\n\nfunction add(dependencyName) {\n    return {\n        type: 'action',\n        action: 'source.dependencies.add',\n        dependency: dependencyName,\n    };\n}\n\n\nvar d = Object.freeze({\n\tadd: add\n});\n\nfunction rename(path, title) {\n    return {\n        type: 'action',\n        action: 'source.module.rename',\n        path: path,\n        title: title,\n    };\n}\n\n\nvar m = Object.freeze({\n\trename: rename\n});\n\nvar dependencies = d;\nvar modules = m;\n\n\nvar source = Object.freeze({\n\tdependencies: dependencies,\n\tmodules: modules\n});\n\n/**\n * Returns an action that describes to show an error\n * in the code of the editor (with the red squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {ErrorOptions} { line, column, path, payload }\n * @returns {ErrorAction}\n */\nfunction show$1(title, message, _a) {\n    var line = _a.line, column = _a.column, lineEnd = _a.lineEnd, columnEnd = _a.columnEnd, path = _a.path, payload = _a.payload, source = _a.source;\n    return {\n        title: title,\n        message: message,\n        line: line,\n        column: column,\n        path: path,\n        payload: payload,\n        lineEnd: lineEnd,\n        columnEnd: columnEnd,\n        severity: 'error',\n        type: 'action',\n        action: 'show-error',\n        source: source || 'browser',\n    };\n}\nfunction clear(path, source) {\n    return {\n        type: 'action',\n        action: 'clear-errors',\n        path: path,\n        source: source,\n    };\n}\n\n\nvar error = Object.freeze({\n\tshow: show$1,\n\tclear: clear\n});\n\n/**\n * Returns an action that describes to show a correction\n * in the code of the editor (with the yellow/blue squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {CorrectionOptions} { line, column, payload }\n * @returns {CorrectionAction}\n */\nfunction show$2(message, _a) {\n    var _b = _a === void 0 ? {\n        path: '',\n        severity: 'warning',\n        source: '',\n    } : _a, line = _b.line, column = _b.column, lineEnd = _b.lineEnd, columnEnd = _b.columnEnd, path = _b.path, payload = _b.payload, _c = _b.severity, severity = _c === void 0 ? 'warning' : _c, _d = _b.source, source = _d === void 0 ? '' : _d;\n    return {\n        message: message,\n        line: line,\n        column: column,\n        lineEnd: lineEnd,\n        columnEnd: columnEnd,\n        path: path,\n        payload: payload,\n        severity: severity,\n        source: source,\n        type: 'action',\n        action: 'show-correction',\n    };\n}\nfunction clear$1(path, source) {\n    return {\n        type: 'action',\n        action: 'clear-corrections',\n        path: path,\n        source: source,\n    };\n}\n\n\nvar correction = Object.freeze({\n\tshow: show$2,\n\tclear: clear$1\n});\n\n/**\n * Returns an action that describes to show a correction\n * in the code of the editor (with the yellow/blue squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {CorrectionOptions} { line, column, payload }\n * @returns {CorrectionAction}\n */\nfunction show$3(_a) {\n    var line = _a.line, path = _a.path, className = _a.className;\n    return {\n        line: line,\n        path: path,\n        className: className,\n        type: 'action',\n        action: 'show-glyph',\n    };\n}\n\n\nvar glyph = Object.freeze({\n\tshow: show$3\n});\n\n// All actions of the editor are defined here. The sandbox can send messages\n// like `source.files.rename` which the editor will see as an action to rename\n// a module. This will allow plugins to alter project content in the future\nvar actions = {\n    notifications: notifications,\n    editor: editor,\n    source: source,\n    error: error,\n    correction: correction,\n    glyph: glyph,\n};\n\nvar host = typeof process !== 'undefined' && process.env.CODESANDBOX_HOST;\nvar host$1 = host || 'https://codesandbox.io';\n\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// import * as debug from 'debug';\nvar bundlers = new Map();\nfunction checkIsStandalone() {\n    if (typeof window === 'undefined') {\n        return true;\n    }\n    if (window.location && window.location.href.indexOf('?standalone') > -1) {\n        return true;\n    }\n    if (window.opener || window.parent !== window) {\n        if (window.location && window.location.href.indexOf(host$1) > -1) {\n            // If this location href is codesandbox.io or something, we're most probably in an embed\n            // iframed on another page. This means that we're actually standalone, but we're fooled\n            // by the fact that we're embedded somewhere else.\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\n// Whether the tab has a connection with the editor\nvar isStandalone = checkIsStandalone();\nvar resolveIframeHandshake;\nvar iframeHandshakeDone = false;\n/**\n * Resolves when the handshake between the frame and the editor has succeeded\n */\nvar iframeHandshake = new Promise(function (resolve) {\n    resolveIframeHandshake = resolve;\n});\n// Field used by a \"child\" frame to determine its parent origin\nvar parentOrigin = null;\nvar parentId = null;\nvar parentOriginListener = function (e) {\n    var _a;\n    if (e.data.type === 'register-frame' && !parentId) {\n        parentOrigin = e.data.origin;\n        parentId = (_a = e.data.id) !== null && _a !== void 0 ? _a : null;\n        if (!iframeHandshakeDone) {\n            resolveIframeHandshake();\n            iframeHandshakeDone = true;\n        }\n        self.removeEventListener('message', parentOriginListener);\n    }\n};\nif (typeof window !== 'undefined') {\n    self.addEventListener('message', parentOriginListener);\n}\nfunction resetState() {\n    parentOrigin = null;\n    bundlers.clear();\n}\n/**\n * Send a message to the editor, this is most probably an action you generated\n *\n * @export\n * @param {*} message\n * @returns\n */\nfunction dispatch(message) {\n    if (!message)\n        return;\n    var newMessage = __assign(__assign({}, message), { codesandbox: true });\n    if (parentId !== null) {\n        newMessage.$id = parentId;\n    }\n    notifyListeners(newMessage);\n    notifyFrames(newMessage);\n    if (isStandalone)\n        return;\n    if (parentOrigin === null && message.type !== 'initialized')\n        return;\n    if (window.opener) {\n        window.opener.postMessage(newMessage, parentOrigin === null ? '*' : parentOrigin);\n    }\n    else {\n        window.parent.postMessage(newMessage, parentOrigin === null ? '*' : parentOrigin);\n    }\n}\nvar listeners = {};\nvar listenerId = 0;\n/**\n * Listen to everything that comes in from either the editor or the sandbox\n * @param callback Call this function to 'unlisten'\n */\nfunction listen(callback) {\n    var id = ++listenerId;\n    listeners[id] = callback;\n    return function () {\n        delete listeners[id];\n    };\n}\nfunction notifyListeners(data, source) {\n    // eslint-disable-next-line no-shadow\n    Object.keys(listeners).forEach(function (listenerId) {\n        if (listeners[listenerId]) {\n            try {\n                listeners[listenerId](data, source);\n            }\n            catch (e) {\n                /**/\n            }\n        }\n    });\n}\nfunction notifyFrames(message) {\n    var rawMessage = JSON.parse(JSON.stringify(message));\n    bundlers.forEach(function (origin, frame) {\n        if (frame && frame.postMessage) {\n            frame.postMessage(__assign(__assign({}, rawMessage), { codesandbox: true }), origin);\n        }\n    });\n}\nfunction eventListener(e) {\n    if (e.data.type === 'initialized' || isStandalone) {\n        // iframe handshake is auto-resolved in the parent, only the child needs to wait for it\n        // we detect the parent either by the \"initialized\" message which only the parent receives\n        // or by the \"isStandalone\" flag which works for codesandbox.io and when sandpack is not inside an iframe\n        iframeHandshakeDone = true;\n    }\n    if (!iframeHandshakeDone) {\n        return;\n    }\n    var data = e.data;\n    if (data &&\n        data.codesandbox &&\n        (parentOrigin === null || e.origin === parentOrigin) &&\n        (data.$id == null || parentId === null || parentId === data.$id)) {\n        notifyListeners(data, e.source);\n    }\n}\n/**\n * Register an window as a output the `dispatch` function can send messages to.\n *\n * @param frame\n */\nfunction registerFrame(frame, origin, bundlerId) {\n    bundlers.set(frame, origin);\n    frame.postMessage({\n        type: 'register-frame',\n        origin: document.location.origin,\n        id: bundlerId,\n    }, origin);\n}\nif (typeof window !== 'undefined') {\n    window.addEventListener('message', eventListener);\n}\nfunction reattach() {\n    window.addEventListener('message', eventListener);\n}\n\n// Errors\n\nexport { Protocol, transformError, clearErrorTransformers, registerErrorTransformer, actions, isStandalone, iframeHandshake, resetState, dispatch, listen, notifyListeners, registerFrame, reattach };\n//# sourceMappingURL=codesandbox.es5.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isServer = void 0;\nconst SERVER_TEMPLATE_NAMES = [\n    'adonis',\n    'apollo',\n    'docusaurus',\n    'ember',\n    'gatsby',\n    'gridsome',\n    'marko',\n    'mdx-deck',\n    'nest',\n    'next',\n    'node',\n    'nuxt',\n    'quasar',\n    'remix',\n    'sapper',\n    'styleguidist',\n    'unibit',\n    'vuepress',\n];\nconst isServer = (template) => SERVER_TEMPLATE_NAMES.indexOf(template) !== -1;\nexports.isServer = isServer;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.v2DefaultBranchUrl = exports.v2BranchUrl = exports.dashboard = exports.githubAppInstallLink = exports.teamInviteLink = exports.blogUrl = exports.packageExamplesUrl = exports.docsUrl = exports.getSandboxId = exports.privacyUrl = exports.tosUrl = exports.curatorUrl = exports.csbSite = exports.searchUrl = exports.gitHubToProjectsUrl = exports.gitHubToSandboxUrl = exports.optionsToParameterizedUrl = exports.githubRepoUrl = exports.profileLikesUrl = exports.profileSandboxesUrl = exports.teamSettingsUrl = exports.teamOverviewUrl = exports.exploreUrl = exports.dashboardUrl = exports.profileUrl = exports.signInVercelUrl = exports.signInUrl = exports.signInPageUrl = exports.forkSandboxUrl = exports.frameUrl = exports.embedUrl = exports.sandboxUrl = exports.v2EditorUrl = exports.editorUrl = exports.uploadFromCliUrl = exports.newCxJSSandboxUrl = exports.newAngularSandboxUrl = exports.newSvelteSandboxUrl = exports.importFromGitHubUrl = exports.newVueSandboxUrl = exports.newPreactSandboxUrl = exports.newDojoSandboxUrl = exports.newReactTypeScriptSandboxUrl = exports.parcelSandboxUrl = exports.newSandboxUrl = exports.newSandboxWizard = exports.protocolAndHost = exports.host = exports.CSBProjectGitHubRepository = exports.gitHubRepoPattern = void 0;\nconst is_server_1 = require(\"../templates/helpers/is-server\");\nconst dashboard = __importStar(require(\"./url-generator/dashboard\"));\nexports.dashboard = dashboard;\nexports.gitHubRepoPattern = /(https?:\\/\\/)?((www.)?)github.com(\\/[\\w-]+){2,}/;\nconst gitHubPrefix = /(https?:\\/\\/)?((www.)?)github.com/;\nconst dotGit = /(\\.git)$/;\nconst sandboxHost = {\n    'https://codesandbox.io': 'https://csb.app',\n    'https://codesandbox.stream': 'https://codesandbox.dev',\n};\n// Second slash comes from joining URL parts\nconst STATIC_SITE_PROTOCOL = 'https:/';\nconst STATIC_SITE_DOMAIN = 'codesandbox.io';\nconst CSBProjectGitHubRepository = ({ owner, repo, welcome, }) => {\n    const origin = process.env.STAGING_API\n        ? 'https://codesandbox.stream'\n        : 'https://codesandbox.io';\n    return `${origin}/p/github/${owner}/${repo}?create=true${welcome ? '&welcome=true' : ''}`;\n};\nexports.CSBProjectGitHubRepository = CSBProjectGitHubRepository;\nconst buildEncodedUri = (strings, ...values) => strings[0] +\n    values\n        .map((value, i) => `${encodeURIComponent(value)}${strings[i + 1]}`)\n        .join('');\nconst REGEX = /(?<id>\\w{5,6})-(?<port>\\d{1,5})\\.(?<hostname>.*)/;\nfunction getCodeSandboxDevHost(port) {\n    if (typeof window === 'undefined') {\n        // eslint-disable-next-line global-require\n        const hostname = require('os').hostname();\n        return `${hostname}-${port}.preview.csb.app`;\n    }\n    const currentUrl = location.host;\n    const currentMatch = currentUrl.match(REGEX);\n    if (!(currentMatch === null || currentMatch === void 0 ? void 0 : currentMatch.groups)) {\n        return undefined;\n    }\n    const { id, hostname } = currentMatch.groups;\n    if (!id || !port || !hostname) {\n        return undefined;\n    }\n    return `${id}-${port}.${hostname}`;\n}\nconst host = () => {\n    if (process.env.CSB && getCodeSandboxDevHost(3000)) {\n        return getCodeSandboxDevHost(3000);\n    }\n    if (process.env.NODE_ENV === 'production') {\n        return process.env.CODESANDBOX_HOST.split('//')[1];\n    }\n    if (process.env.LOCAL_SERVER) {\n        return 'localhost:3000';\n    }\n    return process.env.DEV_DOMAIN;\n};\nexports.host = host;\nconst protocolAndHost = () => `${location.protocol}//${(0, exports.host)()}`;\nexports.protocolAndHost = protocolAndHost;\nconst newSandboxWizard = () => `/s`;\nexports.newSandboxWizard = newSandboxWizard;\nconst newSandboxUrl = () => `/s/new`;\nexports.newSandboxUrl = newSandboxUrl;\nconst parcelSandboxUrl = () => `/s/vanilla`;\nexports.parcelSandboxUrl = parcelSandboxUrl;\nconst newReactTypeScriptSandboxUrl = () => `/s/react-ts`;\nexports.newReactTypeScriptSandboxUrl = newReactTypeScriptSandboxUrl;\nconst newDojoSandboxUrl = () => `/s/github/dojo/dojo-codesandbox-template`;\nexports.newDojoSandboxUrl = newDojoSandboxUrl;\nconst newPreactSandboxUrl = () => `/s/preact`;\nexports.newPreactSandboxUrl = newPreactSandboxUrl;\nconst newVueSandboxUrl = () => `/s/vue`;\nexports.newVueSandboxUrl = newVueSandboxUrl;\nconst importFromGitHubUrl = () => `/s/github`;\nexports.importFromGitHubUrl = importFromGitHubUrl;\nconst newSvelteSandboxUrl = () => `/s/svelte`;\nexports.newSvelteSandboxUrl = newSvelteSandboxUrl;\nconst newAngularSandboxUrl = () => `/s/angular`;\nexports.newAngularSandboxUrl = newAngularSandboxUrl;\nconst newCxJSSandboxUrl = () => `/s/github/codaxy/cxjs-codesandbox-template`;\nexports.newCxJSSandboxUrl = newCxJSSandboxUrl;\nconst uploadFromCliUrl = () => `/s/cli`;\nexports.uploadFromCliUrl = uploadFromCliUrl;\nconst sandboxGitUrl = (git) => buildEncodedUri `github/${git.username}/${git.repo}/tree/${git.branch}/` +\n    git.path;\nconst editorUrl = () => `/s/`;\nexports.editorUrl = editorUrl;\nconst v2EditorUrl = () => `/p/`;\nexports.v2EditorUrl = v2EditorUrl;\nconst sandboxUrl = (sandboxDetails) => {\n    const baseUrl = sandboxDetails.isV2\n        ? `${(0, exports.v2EditorUrl)()}sandbox/`\n        : (0, exports.editorUrl)();\n    let queryParams = '';\n    if (sandboxDetails.query) {\n        queryParams = `?${new URLSearchParams(sandboxDetails.query).toString()}`;\n    }\n    if (sandboxDetails.git) {\n        const { git } = sandboxDetails;\n        return `${baseUrl}${sandboxGitUrl(git)}${queryParams}`;\n    }\n    if (sandboxDetails.alias) {\n        return `${baseUrl}${sandboxDetails.alias}${queryParams}`;\n    }\n    return `${baseUrl}${sandboxDetails.id}${queryParams}`;\n};\nexports.sandboxUrl = sandboxUrl;\nconst embedUrl = (sandbox) => {\n    if (sandbox.git) {\n        const { git } = sandbox;\n        return `/embed/${sandboxGitUrl(git)}`;\n    }\n    if (sandbox.alias) {\n        return `/embed/${sandbox.alias}`;\n    }\n    return `/embed/${sandbox.id}`;\n};\nexports.embedUrl = embedUrl;\nconst stagingFrameUrl = (shortid, path) => {\n    const stagingHost = (process.env.CODESANDBOX_HOST\n        ? process.env.CODESANDBOX_HOST\n        : '').split('//')[1];\n    const segments = stagingHost.split('.');\n    const first = segments.shift();\n    return `${location.protocol}//${first}-${shortid}.${segments.join('.')}/${path}`;\n};\nconst frameUrl = (sandbox, append = '', { useFallbackDomain = false, port = undefined, } = {}) => {\n    var _a, _b;\n    // @ts-ignore\n    const usesStaticPreviewURL = ((_a = window._env_) === null || _a === void 0 ? void 0 : _a.USE_STATIC_PREVIEW) === 'true';\n    // @ts-ignore\n    const previewDomain = (_b = window._env_) === null || _b === void 0 ? void 0 : _b.PREVIEW_DOMAIN;\n    const path = append.indexOf('/') === 0 ? append.substr(1) : append;\n    if (usesStaticPreviewURL && previewDomain) {\n        return `${location.protocol}//${previewDomain}/${path}`;\n    }\n    const templateIsServer = (0, is_server_1.isServer)(sandbox.template);\n    if (process.env.LOCAL_SERVER) {\n        if (templateIsServer) {\n            return `${location.protocol}//${sandbox.id}${port ? `-${port}` : ''}.${templateIsServer ? 'sse.' : ''}${process.env.STAGING_API ? 'codesandbox.stream' : 'codesandbox.io'}/${path}`;\n        }\n        return `http://localhost:3002/${path}`;\n    }\n    if (process.env.STAGING) {\n        return stagingFrameUrl(sandbox.id, path);\n    }\n    let sHost = (0, exports.host)();\n    if (`https://${sHost}` in sandboxHost &&\n        !useFallbackDomain &&\n        !templateIsServer) {\n        sHost = sandboxHost[`https://${sHost}`].split('//')[1];\n    }\n    return `${location.protocol}//${sandbox.id}${port ? `-${port}` : ''}.${templateIsServer ? 'sse.' : ''}${sHost}/${path}`;\n};\nexports.frameUrl = frameUrl;\nconst forkSandboxUrl = (sandbox) => `${(0, exports.sandboxUrl)(sandbox)}/fork`;\nexports.forkSandboxUrl = forkSandboxUrl;\nconst signInPageUrl = (redirectTo) => {\n    let url = `/signin`;\n    if (redirectTo) {\n        url += '?continue=' + redirectTo;\n    }\n    return url;\n};\nexports.signInPageUrl = signInPageUrl;\nconst signInUrl = (extraScopes = false) => '/auth/github' +\n    (extraScopes ? '?scope=user:email,public_repo,workflow' : '');\nexports.signInUrl = signInUrl;\nconst signInVercelUrl = () => '/auth/vercel';\nexports.signInVercelUrl = signInVercelUrl;\nconst profileUrl = (username) => `/u/${username}`;\nexports.profileUrl = profileUrl;\nconst dashboardUrl = () => `/dashboard`;\nexports.dashboardUrl = dashboardUrl;\nconst exploreUrl = () => `/explore`;\nexports.exploreUrl = exploreUrl;\nconst teamOverviewUrl = (teamId) => `/dashboard/teams/${teamId}`;\nexports.teamOverviewUrl = teamOverviewUrl;\nconst teamSettingsUrl = () => `/dashboard/settings`;\nexports.teamSettingsUrl = teamSettingsUrl;\nconst profileSandboxesUrl = (username, page) => `${(0, exports.profileUrl)(username)}/sandboxes${page ? `/${page}` : ''}`;\nexports.profileSandboxesUrl = profileSandboxesUrl;\nconst profileLikesUrl = (username, page) => `${(0, exports.profileUrl)(username)}/likes${page ? `/${page}` : ''}`;\nexports.profileLikesUrl = profileLikesUrl;\nconst githubRepoUrl = ({ repo, branch, username, path, }) => buildEncodedUri `https://github.com/${username}/${repo}/tree/${branch}/` +\n    path;\nexports.githubRepoUrl = githubRepoUrl;\nconst optionsToParameterizedUrl = (options) => {\n    const keyValues = Object.keys(options)\n        .sort()\n        .filter(a => options[a])\n        .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(options[key])}`)\n        .join('&');\n    return keyValues ? `?${keyValues}` : '';\n};\nexports.optionsToParameterizedUrl = optionsToParameterizedUrl;\nconst gitHubToSandboxUrl = (githubUrl) => githubUrl.replace(gitHubPrefix, '/s/github').replace(dotGit, '');\nexports.gitHubToSandboxUrl = gitHubToSandboxUrl;\nconst gitHubToProjectsUrl = (githubUrl) => githubUrl.replace(gitHubPrefix, '/p/github').replace(dotGit, '');\nexports.gitHubToProjectsUrl = gitHubToProjectsUrl;\nconst searchUrl = (query) => `/search${query ? `?query=${query}` : ''}`;\nexports.searchUrl = searchUrl;\nconst csbSite = () => [STATIC_SITE_PROTOCOL, STATIC_SITE_DOMAIN].join('/');\nexports.csbSite = csbSite;\nconst curatorUrl = () => `/curator`;\nexports.curatorUrl = curatorUrl;\nconst tosUrl = () => `${(0, exports.csbSite)()}/legal/terms`;\nexports.tosUrl = tosUrl;\nconst privacyUrl = () => `${(0, exports.csbSite)()}/legal/privacy`;\nexports.privacyUrl = privacyUrl;\nfunction getSandboxId() {\n    const csbHost = process.env.CODESANDBOX_HOST;\n    if (process.env.LOCAL_SERVER) {\n        return document.location.hash.replace('#', '');\n    }\n    if (process.env.STAGING) {\n        const segments = csbHost.split('//')[1].split('.');\n        const first = segments.shift();\n        const re = RegExp(`${first}-(.*)\\\\.${segments.join('\\\\.')}`);\n        return document.location.host.match(re)[1];\n    }\n    let result;\n    [csbHost, sandboxHost[csbHost]].filter(Boolean).forEach(tryHost => {\n        const hostRegex = tryHost.replace(/https?:\\/\\//, '').replace(/\\./g, '\\\\.');\n        const sandboxRegex = new RegExp(`(.*)\\\\.${hostRegex}`);\n        const matches = document.location.host.match(sandboxRegex);\n        if (matches) {\n            result = matches[1];\n        }\n    });\n    if (!result) {\n        throw new Error(`Can't detect sandbox ID from the current URL`);\n    }\n    return result;\n}\nexports.getSandboxId = getSandboxId;\nconst docsUrl = (path = '') => `${(0, exports.csbSite)()}/docs${path}`;\nexports.docsUrl = docsUrl;\nconst packageExamplesUrl = (packageName) => `${(0, exports.csbSite)()}/examples/package/${packageName}`;\nexports.packageExamplesUrl = packageExamplesUrl;\nconst blogUrl = (path = '') => `${(0, exports.csbSite)()}/blog${path}`;\nexports.blogUrl = blogUrl;\nconst teamInviteLink = (inviteToken) => `${(0, exports.protocolAndHost)()}/invite/${inviteToken}`;\nexports.teamInviteLink = teamInviteLink;\nconst githubAppInstallLink = () => {\n    return `${(0, exports.protocolAndHost)()}/auth/github/app-install`;\n};\nexports.githubAppInstallLink = githubAppInstallLink;\n// This function handles all the scenarios of v2 branch editor urls\n// It is not exported from the package to avoid miss-using it\nconst v2EditorBranchUrl = ({ owner, repoName, branchName, workspaceId, createDraftBranch, importFlag, source, }) => {\n    const queryString = new URLSearchParams(Object.assign(Object.assign(Object.assign(Object.assign({}, (workspaceId ? { workspaceId } : {})), (createDraftBranch ? { create: 'true' } : {})), (importFlag ? { import: 'true' } : {})), (source ? { utm_source: source } : {}))).toString();\n    return `${(0, exports.v2EditorUrl)()}github/${owner}/${repoName}${branchName ? '/' + branchName : ''}${queryString ? '?' + queryString : ''}`;\n};\nconst v2BranchUrl = (params) => {\n    return v2EditorBranchUrl(params);\n};\nexports.v2BranchUrl = v2BranchUrl;\nconst v2DefaultBranchUrl = (params) => {\n    return v2EditorBranchUrl(params);\n};\nexports.v2DefaultBranchUrl = v2DefaultBranchUrl;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.proUrl = exports.discoverSearch = exports.discover = exports.search = exports.permissionSettings = exports.registrySettings = exports.settings = exports.liked = exports.shared = exports.deleted = exports.recent = exports.templates = exports.syncedSandboxes = exports.repository = exports.repositories = exports.myContributions = exports.drafts = exports.sandboxes = exports.ALL_SANDBOXES_URL_PREFIX = exports.DASHBOARD_URL_PREFIX = void 0;\nexports.DASHBOARD_URL_PREFIX = '/dashboard';\nexports.ALL_SANDBOXES_URL_PREFIX = `${exports.DASHBOARD_URL_PREFIX}/sandboxes`;\nfunction appendTeamIdQueryParam(url, teamId) {\n    if (teamId) {\n        return `${url}?workspace=${teamId}`;\n    }\n    return url;\n}\nfunction sanitizePath(path) {\n    return path\n        .split('/')\n        .map(p => p.split(' ').map(encodeURIComponent).join(' '))\n        .join('/');\n}\nconst sandboxes = (path, teamId) => appendTeamIdQueryParam(`${exports.ALL_SANDBOXES_URL_PREFIX}${sanitizePath(path)}`, teamId);\nexports.sandboxes = sandboxes;\nconst drafts = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/drafts`, teamId);\nexports.drafts = drafts;\nconst myContributions = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/my-contributions`, teamId);\nexports.myContributions = myContributions;\nconst repositories = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/repositories`, teamId);\nexports.repositories = repositories;\nconst repository = ({ owner, name, teamId, }) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/repositories/github/${owner}/${name}`, teamId);\nexports.repository = repository;\nconst syncedSandboxes = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/synced-sandboxes`, teamId);\nexports.syncedSandboxes = syncedSandboxes;\nconst templates = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/templates`, teamId);\nexports.templates = templates;\nconst recent = (teamId, extraParams) => {\n    let recentUrl = appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/recent`, teamId);\n    if (extraParams && Object.keys(extraParams).length > 0) {\n        const params = new URLSearchParams(extraParams);\n        if (recentUrl.includes('?')) {\n            recentUrl += '&';\n        }\n        else {\n            recentUrl += '?';\n        }\n        recentUrl += params.toString();\n    }\n    return recentUrl;\n};\nexports.recent = recent;\nconst deleted = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/deleted`, teamId);\nexports.deleted = deleted;\nconst shared = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/shared`, teamId);\nexports.shared = shared;\nconst liked = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/liked`, teamId);\nexports.liked = liked;\nconst settings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings`, teamId);\nexports.settings = settings;\nconst registrySettings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/npm-registry`, teamId);\nexports.registrySettings = registrySettings;\nconst permissionSettings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/permissions`, teamId);\nexports.permissionSettings = permissionSettings;\nconst search = (query, teamId) => {\n    let searchUrl = appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/search`, teamId);\n    if (searchUrl.includes('?')) {\n        searchUrl += '&';\n    }\n    else {\n        searchUrl += '?';\n    }\n    searchUrl += `query=${query}`;\n    return searchUrl;\n};\nexports.search = search;\nconst discover = (teamId, albumId) => {\n    if (albumId) {\n        return appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/discover/${albumId}`, teamId);\n    }\n    return appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/discover`, teamId);\n};\nexports.discover = discover;\nconst discoverSearch = (query, teamId) => {\n    let searchUrl = appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/discover/search`, teamId);\n    if (searchUrl.includes('?'))\n        searchUrl += '&';\n    else\n        searchUrl += '?';\n    searchUrl += `query=${query}`;\n    return searchUrl;\n};\nexports.discoverSearch = discoverSearch;\nconst proUrl = ({ workspaceId, source } = {}) => {\n    const searchQuery = new URLSearchParams({});\n    if (workspaceId) {\n        searchQuery.set('workspace', workspaceId);\n    }\n    if (source) {\n        searchQuery.set('utm_source', source);\n    }\n    const queryString = searchQuery.toString();\n    return queryString ? `/pro?${queryString}` : '/pro';\n};\nexports.proUrl = proUrl;\n","import { protocolAndHost } from '@codesandbox/common/lib/utils/url-generator';\n\nconst PREVIEW_SECRET_COOKIE_NAME = 'csb_sandbox_secret';\n\nexport const getPreviewSecret = () =>\n  document.cookie.replace(\n    new RegExp(\n      `(?:(?:^|.*;\\\\s*)${PREVIEW_SECRET_COOKIE_NAME}\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$`\n    ),\n    '$1'\n  );\n\nexport const setPreviewSecret = secret => {\n  if (secret === null) {\n    return;\n  }\n\n  const cookieValue = getPreviewSecret();\n  if (\n    (cookieValue && !secret) ||\n    (secret && !cookieValue) ||\n    cookieValue !== secret\n  ) {\n    if (secret) {\n      document.cookie = `${PREVIEW_SECRET_COOKIE_NAME}=${secret};samesite=none;secure;`;\n\n      setTimeout(() => {\n        location.reload();\n      }, 1000);\n    } else {\n      document.cookie = `${PREVIEW_SECRET_COOKIE_NAME}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n    }\n  }\n};\n\nexport const listenForPreviewSecret = () => {\n  const listener = data => {\n    if (data.data && data.data.$type === 'preview-secret') {\n      const { previewSecret } = data.data;\n      setPreviewSecret(previewSecret);\n    }\n  };\n\n  window.addEventListener('message', listener);\n\n  return () => {\n    window.removeEventListener('message', listener);\n  };\n};\n\nfunction getPopupOffset({ width, height }) {\n  const wLeft = window.screenLeft ? window.screenLeft : window.screenX;\n  const wTop = window.screenTop ? window.screenTop : window.screenY;\n\n  const left = wLeft + window.innerWidth / 2 - width / 2;\n  const top = wTop + window.innerHeight / 2 - height / 2;\n\n  return { top, left };\n}\n\nfunction getPopupSize() {\n  return { width: 1020, height: 618 };\n}\n\nfunction getPopupDimensions() {\n  const { width, height } = getPopupSize();\n  const { top, left } = getPopupOffset({ width, height });\n\n  return `width=${width},height=${height},top=${top},left=${left}`;\n}\n\n/**\n * This helper function is purely there to also work when we're building\n * for SSE, which means that the env vars are not set and we thus don't\n * know the host.\n */\nfunction getProtocolAndHostWithSSE() {\n  if (process.env.CODESANDBOX_HOST) {\n    return protocolAndHost();\n  }\n\n  if (document.location.host.endsWith('.stream')) {\n    return 'https://codesandbox.stream';\n  }\n\n  return 'https://codesandbox.io';\n}\n\nexport const requestPreviewSecretFromApp = sandboxId => {\n  const host = getProtocolAndHostWithSSE();\n  const popup = window.open(\n    host + '/auth/sandbox/' + sandboxId,\n    name,\n    `scrollbars=no,toolbar=no,location=no,titlebar=no,directories=no,status=no,menubar=no, ${getPopupDimensions()}`\n  );\n\n  setInterval(() => {\n    popup.postMessage({ $type: 'request-preview-secret' }, host);\n  }, 500);\n\n  const listener = e => {\n    if (e.data && e.data.$type === 'preview-secret') {\n      setPreviewSecret(e.data.previewSecret);\n      window.removeEventListener('message', listener);\n\n      popup.close();\n    }\n  };\n  window.addEventListener('message', listener);\n};\n"],"sourceRoot":""}